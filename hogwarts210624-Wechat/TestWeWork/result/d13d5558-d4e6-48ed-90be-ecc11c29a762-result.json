{"name": "通讯录添加成员", "status": "failed", "statusDetails": {"message": "AssertionError: assert ('phoneexsit' == 'nomal'\n  - nomal\n  + phoneexsit or 'phoneexsit' == 'nomal2'\n  - nomal2\n  + phoneexsit)", "trace": "self = <TestWeWork.test_wework.Testwework object at 0x00C9D370>, name = 'qiming3', englishname = 'Eric4', acctid = 433304, phone = 13048766901, mail = '89717046@qq.com'\nexpect = 'phoneexsit', testing = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"a3363a59c14d7a63bb6af7d53b938d08\")>\n\n    @pytest.mark.parametrize('name,englishname,acctid,phone,mail,expect', get_memberinfo()['info'],\n                             ids=get_memberinfo()['ids'])\n    @allure.story(\"企业微信添加成员\")\n    @allure.title(\"通讯录添加成员\")\n    # 将成员信息和driver传入添加成员这个方法中，进行使用\n    def test_wework_addmember(self, name, englishname, acctid, phone, mail, expect, testing):\n        driver = testing\n        driver.implicitly_wait(8)\n        driver.find_element_by_id(\"menu_contacts\").click()\n        time.sleep(2)\n        # 点击添加成员\n        with allure.step(\"点击添加成员\"):\n            driver.find_element(By.XPATH, '//*[@class=\"js_has_member\"]/div[1]/a[1]').click()\n            # 等待\n         # 手机和邮箱不能同时为空，请更改信息，截图保存在allure报告中\n    \n        with allure.step(f\"{name}的手机和邮箱不能同时为空，截图保存在allure报告中\"):\n            if name == 'nameempyt':\n                driver.find_element(By.ID, 'memberAdd_acctid').send_keys(acctid)\n    \n                logging.info(f\"点击保存后，{name}的为空，截图保存在allure报告中\")\n                driver.find_element(By.LINK_TEXT, '保存').click()\n    \n                # driver.find_elements_by_xpath(\"//*[contains(text(), '手机和邮箱不能同时为空')]\")\n                time.sleep(1)\n                driver.save_screenshot(f\"./TestWeWork/screenshots/请检查用户-{acctid}的name为空.png\")\n                allure.attach.file(fr'./TestWeWork/screenshots/请检查用户-{acctid}的name为空.png',\n                                   attachment_type=allure.attachment_type.PNG)\n                driver.find_element(By.LINK_TEXT, '取消').click()\n                assert expect == 'nameempyt'\n    \n            elif name == 'phonenameempyt':\n    \n                driver.find_element(By.ID, 'username').send_keys(name)\n                driver.find_element(By.ID, 'memberAdd_english_name').send_keys(englishname)\n                driver.find_element(By.ID, 'memberAdd_acctid').send_keys(acctid)\n    \n                logging.info(f\"点击保存后，{name}的手机和邮箱不能同时为空，截图保存在allure报告中\")\n                driver.find_element(By.LINK_TEXT, '保存').click()\n    \n                # driver.find_elements_by_xpath(\"//*[contains(text(), '手机和邮箱不能同时为空')]\")\n                time.sleep(1)\n                driver.save_screenshot(f\"./TestWeWork/screenshots/请检查用户-{name}手机和邮箱不能同时为空.png\")\n                allure.attach.file(fr'./TestWeWork/screenshots/请检查用户-{name}手机和邮箱不能同时为空.png',\n                                   attachment_type=allure.attachment_type.PNG)\n                driver.find_element(By.LINK_TEXT, '取消').click()\n                assert expect == 'phonenameempyt'\n                time.sleep(1)\n            else:\n    \n                logging.info(f\"添加成员{name}信息\")\n                driver.find_element(By.ID, 'username').send_keys(name)\n                driver.find_element(By.ID, 'memberAdd_english_name').send_keys(englishname)\n                driver.find_element(By.ID, 'memberAdd_acctid').send_keys(acctid)\n                driver.find_element(By.ID, 'memberAdd_phone').send_keys(phone)\n                driver.find_element(By.ID, 'memberAdd_mail').send_keys(mail)\n    \n                # 保存成员信息\n                driver.find_element(By.LINK_TEXT, '保存').click()\n    \n                if driver.find_elements_by_xpath(\"//*[contains(text(), '请填写正确的邮箱地址')]\"):\n                    with allure.step(f\"{name}的成员邮箱地址不正确{mail}，截图保存在allure报告中\"):\n                        logging.info(f\"{name}的成员邮箱地址不正确{mail}，截图保存在allure报告中\")\n                        driver.save_screenshot(f\"./TestWeWork/screenshots/请检查用户-{name}邮箱{mail}不正确.png\")\n                        allure.attach.file(fr'./TestWeWork/screenshots/请检查用户-{name}邮箱{mail}不正确.png',\n                                           attachment_type=allure.attachment_type.PNG)\n                        driver.find_element(By.LINK_TEXT, '取消').click()\n                        assert expect ==\"mailFAIL\"\n                        time.sleep(1)\n    \n                elif driver.find_elements_by_xpath(\"//*[contains(text(), '该帐号已被')]\") and driver.find_elements_by_xpath(\"//*[contains(text(), '占有')]\"):\n                    with allure.step(f\"{name}的成员账号{acctid}信息已被占有，截图保存在allure报告中\"):\n                        # {name}的成员账号{acctid}信息已经存在，放日志中\n    \n                        logging.info(f\"{name}的成员账号{acctid}信息已被占有，截图保存在allure报告中\")\n                        driver.save_screenshot(f\"./TestWeWork/screenshots/请检查用户-{name}账号{acctid}已被占有.png\")\n                        allure.attach.file(fr'./TestWeWork/screenshots/请检查用户-{name}账号{acctid}已被占有.png',\n                                           attachment_type=allure.attachment_type.PNG)\n                        driver.find_element(By.LINK_TEXT, '取消').click()\n                        assert expect ==\"acctidexsit\"\n                        time.sleep(1)\n    \n                elif driver.find_elements_by_xpath(\"//*[contains(text(), '该邮箱已被')]\"):\n                    with allure.step(f\"{name}邮箱{mail}已被占有，截图保存在allure报告中\"):\n                        logging.info(f\"{name}的成员邮箱{mail}已被占有，截图保存在allure报告中\")\n                        driver.save_screenshot(f\"./TestWeWork/screenshots/请检查用户-{name}邮箱{mail}已被占有.png\")\n                        allure.attach.file(fr'./TestWeWork/screenshots/请检查用户-{name}邮箱{mail}已被占有.png',\n                                           attachment_type=allure.attachment_type.PNG)\n                        driver.find_element(By.LINK_TEXT, '取消').click()\n                        assert expect ==\"mailexsit\"\n                        time.sleep(1)\n                else:\n>                   assert expect == 'nomal' or expect == 'nomal2'\nE                   AssertionError: assert ('phoneexsit' == 'nomal'\nE                     - nomal\nE                     + phoneexsit or 'phoneexsit' == 'nomal2'\nE                     - nomal2\nE                     + phoneexsit)\n\nTestWeWork\\test_wework.py:152: AssertionError"}, "steps": [{"name": "点击添加成员", "status": "passed", "start": 1624722471008, "stop": 1624722471465}, {"name": "qiming3的手机和邮箱不能同时为空，截图保存在allure报告中", "status": "failed", "statusDetails": {"message": "AssertionError: assert ('phoneexsit' == 'nomal'\n  - nomal\n  + phoneexsit or 'phoneexsit' == 'nomal2'\n  - nomal2\n  + phoneexsit)\n", "trace": "  File \"C:\\Users\\Eric\\PycharmProjects\\pythonProject\\hogwarts210624-Wechat\\TestWeWork\\test_wework.py\", line 152, in test_wework_addmember\n    assert expect == 'nomal' or expect == 'nomal2'\n"}, "start": 1624722471466, "stop": 1624722496643}], "attachments": [{"name": "log", "source": "5def60af-0252-4480-95e7-c6c15187e1b5-attachment.txt", "type": "text/plain"}], "parameters": [{"name": "name", "value": "'qiming3'"}, {"name": "englishname", "value": "'Eric4'"}, {"name": "acctid", "value": "433304"}, {"name": "phone", "value": "13048766901"}, {"name": "mail", "value": "'89717046@qq.com'"}, {"name": "expect", "value": "'phoneexsit'"}], "start": 1624722468845, "stop": 1624722496644, "uuid": "366deb0c-ca26-40a6-88a6-4eb719cf07aa", "historyId": "2eaea0b3b1a513714fa266ee5257041c", "testCaseId": "234c75fbeccb2e9651b218d99c922a86", "fullName": "test_wework.Testwework#test_wework_addmember", "labels": [{"name": "story", "value": "企业微信添加成员"}, {"name": "feature", "value": "添加成员模块"}, {"name": "suite", "value": "test_wework"}, {"name": "subSuite", "value": "Testwework"}, {"name": "host", "value": "QKFZ-888"}, {"name": "thread", "value": "17236-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "test_wework"}]}